#!/bin/bash

API_URL="https://svs-stock-api.azurewebsites.net/api/auth/login"

echo "=============================================="
echo "üîê ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Login ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô - SVS Business Suite"
echo "=============================================="
echo ""

# ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
users=(
    "visanurak.c:‡∏ô‡∏≤‡∏¢‡∏ß‡∏¥‡∏®‡∏ì‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏™‡∏£‡πâ‡∏≠‡∏¢"
    "suthep.p:‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡πÄ‡∏ó‡∏û ‡∏õ‡∏≤‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå"
    "sawaeng.p:‡∏ô‡∏≤‡∏¢‡πÅ‡∏™‡∏ß‡∏á ‡πÇ‡∏û‡∏ò‡∏¥‡πå‡πÄ‡∏¢‡πá‡∏ô"
    "somchai.a:‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏≠‡∏≤‡∏ß‡∏£‡∏ì‡πå‡∏Ñ‡∏∏‡∏°"
    "surajet.j:‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡∏£‡πÄ‡∏à‡∏ï‡∏ô‡πå ‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏≠‡∏î"
    "sunisa.k:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏ô‡∏¥‡∏™‡∏≤ ‡πÅ‡∏Å‡πâ‡∏ß‡∏ß‡∏¥‡πÄ‡∏®‡∏©"
    "wilawan.k:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏¥‡∏•‡∏≤‡∏ß‡∏£‡∏£‡∏ì ‡πÇ‡∏Ñ‡∏ï‡∏£‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥"
    "titarat.l:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ê‡∏¥‡∏ï‡∏£‡∏±‡∏ï‡∏ô‡πå ‡πÄ‡∏•‡∏¥‡∏®‡πÄ‡∏ä‡∏≤‡∏ß‡∏¢‡∏∏‡∏ó‡∏ò"
    "waraporn.k:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡∏Å‡∏µ‡∏£‡∏ï‡∏¥‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏†‡∏£‡∏ì‡πå"
    "kamonwan.k:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏°‡∏•‡∏ß‡∏£‡∏£‡∏ì ‡∏Ç‡∏ß‡∏≤‡∏†‡∏±‡∏Å‡∏î‡∏µ"
    "natthapong.t:‡∏ô‡∏≤‡∏¢‡∏ì‡∏±‡∏ê‡∏û‡∏á‡∏©‡πå ‡∏ï‡∏±‡∏î‡∏õ‡πà‡∏ß‡∏á"
    "chonticha.a:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏•‡∏ò‡∏¥‡∏ä‡∏≤ ‡∏≠‡∏≤‡∏ß‡∏£‡∏ì‡πå‡∏Ñ‡∏∏‡∏°"
    "atiwich.s:‡∏ô‡∏≤‡∏¢‡∏≠‡∏ï‡∏¥‡∏ß‡∏¥‡∏ä‡∏ç‡πå ‡πÅ‡∏ã‡πà‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏á"
    "orawan.r:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏≠‡∏£‡∏ß‡∏±‡∏ì ‡∏£‡∏±‡∏ï‡∏ô‡∏õ‡∏£‡∏∞‡∏ó‡∏µ‡∏õ"
    "lamduan.k:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏•‡∏≥‡∏î‡∏ß‡∏ô ‡πÇ‡∏Ñ‡∏£‡∏ï‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥"
    "smut.k:‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏∏‡∏ó‡∏£ ‡∏Ç‡∏≠‡∏ñ‡∏≤‡∏ß‡∏£‡∏ß‡∏á‡∏®‡πå"
    "nattiporn.t:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ó‡∏ê‡∏¥‡∏†‡∏£‡∏ì‡πå ‡∏ò‡∏ß‡∏±‡∏ä‡∏™‡∏∏‡∏†‡∏≤"
    "narumon.b:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏§‡∏°‡∏• ‡∏ö‡∏£‡∏£‡∏û‡∏ï‡∏≤"
    "wimonrat.r:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏¥‡∏°‡∏•‡∏£‡∏±‡∏ï‡∏ô‡πå ‡∏£‡∏±‡∏Å‡∏ô‡∏≤"
    "juthakarn.t:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏à‡∏∏‡∏ë‡∏≤‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡πå ‡∏ñ‡∏¥‡πà‡∏ô‡∏û‡∏§‡∏Å‡∏©‡πå‡∏á‡∏≤‡∏°"
    "thatchaphon.m:‡∏ô‡∏≤‡∏¢‡∏ò‡∏±‡∏ä‡∏û‡∏• ‡∏°‡∏µ‡∏°‡∏¥‡∏ô‡∏ó‡πå"
    "Narongdej.s:‡∏ô‡∏≤‡∏¢‡∏ì‡∏£‡∏á‡∏Ñ‡πå‡πÄ‡∏î‡∏ä ‡πÅ‡∏ã‡πà‡∏Æ‡πà‡∏≠"
    "pimpitcha.s:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡∏û‡∏¥‡∏ä‡∏ä‡∏≤ ‡∏®‡∏£‡∏µ‡∏ß‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå"
    "worrawalun.a:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏£‡∏ß‡∏•‡∏±‡∏ç‡∏ä‡πå ‡∏≠‡∏≤‡∏ß‡∏£‡∏ì‡πå‡∏Ñ‡∏∏‡∏°"
    "thanapol.t:‡∏ô‡∏≤‡∏¢ ‡∏ò‡∏ô‡∏û‡∏• ‡∏ó‡∏¥‡∏£‡∏≠‡∏¢‡∏£‡∏±‡∏°‡∏¢‡πå"
    "napat.v:‡∏ô‡∏≤‡∏¢ ‡∏ì‡∏†‡∏±‡∏ó‡∏£ ‡∏ß‡∏µ‡∏£‡∏∞‡∏Å‡∏∏‡∏•"
    "mallika.n:‡∏Ñ‡∏∏‡∏ì‡∏°‡∏±‡∏•‡∏•‡∏¥‡∏Å‡∏≤ ‡∏ô‡∏≤‡∏ó‡∏ö‡∏£‡∏£‡∏•‡∏∑‡∏≠"
    "jiranthanin.b:‡∏ô‡∏≤‡∏¢‡∏à‡∏¥‡∏£‡∏±‡∏ô‡∏ò‡∏ô‡∏¥‡∏ô ‡∏ö‡∏∏‡∏ç‡∏™‡∏∏‡∏Ç"
    "bee.g:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏ô‡∏†‡∏£‡∏ì‡πå ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏≠‡∏î‡∏ó‡∏ô"
    "tota.g:‡∏ô‡∏≤‡∏¢‡∏ö‡∏∏‡∏ç‡∏ç‡∏§‡∏ó‡∏ò‡∏¥‡πå ‡∏®‡∏£‡∏µ‡∏à‡∏∞‡∏ö‡∏Å"
    "biew.g:‡∏£‡∏±‡∏ä‡∏ô‡∏µ‡∏Å‡∏£ ‡πÄ‡∏û‡πá‡∏ç‡∏®‡∏£‡∏µ"
    "moo.g:‡∏ô‡∏≤‡∏¢‡∏ó‡∏®‡∏û‡∏£ ‡∏£‡∏±‡∏ï‡∏ô‡∏õ‡∏£‡∏∞‡∏ó‡∏µ‡∏õ"
    "hearn.g:‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏≤‡∏¢‡∏´‡∏¢‡∏∏‡∏î ‡∏≠‡∏≤‡∏ß‡∏£‡∏ì‡πå‡∏Ñ‡∏∏‡∏°"
)

PASSWORD="123456"

pass_count=0
fail_count=0

printf "%-5s %-20s %-35s %-10s %s\n" "No." "Username" "‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" "Status" "Roles"
echo "------------------------------------------------------------------------------------------------------"

i=1
for user_info in "${users[@]}"; do
    username="${user_info%%:*}"
    fullname="${user_info##*:}"
    
    response=$(curl -s -X POST "$API_URL" \
        -H "Content-Type: application/json" \
        -d "{\"username\":\"$username\",\"password\":\"$PASSWORD\"}")
    
    if echo "$response" | grep -q "accessToken"; then
        roles=$(echo "$response" | grep -o '"roles":\[[^]]*\]' | sed 's/"roles":\[//;s/\]//;s/"//g')
        printf "%-5s %-20s %-35s %-10s %s\n" "$i" "$username" "$fullname" "‚úÖ ‡∏ú‡πà‡∏≤‡∏ô" "$roles"
        ((pass_count++))
    else
        error=$(echo "$response" | grep -o '"message":"[^"]*"' | sed 's/"message":"//;s/"//')
        printf "%-5s %-20s %-35s %-10s %s\n" "$i" "$username" "$fullname" "‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô" "$error"
        ((fail_count++))
    fi
    
    ((i++))
done

echo ""
echo "=============================================="
echo "üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö"
echo "=============================================="
echo "‚úÖ Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: $pass_count ‡∏Ñ‡∏ô"
echo "‚ùå Login ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: $fail_count ‡∏Ñ‡∏ô"
echo "üìã ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: $((pass_count + fail_count)) ‡∏Ñ‡∏ô"
echo ""
